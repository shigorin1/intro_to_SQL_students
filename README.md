
# Как отправить Solution

Это задание будет автоматически проверяться с помощью CI workflows в GitHub.
Чтобы всё работало корректно:

1. Сделайте fork этого репозитория в свой GitHub-аккаунт, затем клонируйте fork-репозиторий на локальную машину.
2. В своём GitHub-репозитории перейдите на вкладку **Actions** и включите их, чтобы иметь возможность проверять статус решения.
3. Решите все задания. Вы можете проверить своё решение, написав unit tests. Это не влияет на итоговую оценку, но рекомендуется сделать перед отправкой решения.
4. После выполнения всех заданий закоммитьте локальные изменения и отправьте их в удалённый репозиторий командой: `git push`.
5. Каждый раз, когда вы выполняете push локального репозитория, автоматические тесты будут проверять ваше решение в GitHub. Перейдите на вкладку **Actions** и проверьте корректность решения.
   Зелёная галочка означает, что все тесты успешно пройдены и решение на 100% корректно.
   В противном случае вы получите сообщение об ошибке, что означает, что решение не прошло все тесты.


# Описание заданий

## Task 1:

В этом задании вам нужно написать SQL query для извлечения информации из database table.

Вам дана таблица с именем `users`, со следующей схемой:

```sql
CREATE TABLE users (
    id integer PRIMARY KEY,
    first_name text,
    last_name text,
    age integer
);
```

Ваша задача — написать SQL query, который выбирает всех пользователей, возраст которых находится в диапазоне от 20 до 30 лет (включительно), отсортированных по возрасту по возрастанию.

Вы должны **исключить атрибут `id`** из таблицы `users` и включить только три атрибута:

* `first_name`
* `last_name`
* `age`

Кроме того, ваш query должен быть обёрнут в объект **view** с именем `v_users_age`.

View — это виртуальная таблица, содержимое которой определяется SELECT query.
Она **не хранит данные**, а хранит **query**.

### Подсказки:

1. Чтобы создать новый view, используйте:

```sql
CREATE VIEW {view_name} AS 
{QUERY};
```

После выполнения этой команды будет создан объект view с именем `{view_name}`, содержащий результат выполнения `{QUERY}`.


2. Изучите команду `ORDER BY`, чтобы отсортировать записи по возрасту.

Вы должны написать решение в файле `task1/solution.sql`.
Не изменяйте другие файлы в репозитории.

---

## Task 2:

Вам дана База Данных, содержащая информацию о продажах нескольких продуктов
Данные находятся в файле `task2/data.csv`.

Database уже создана со следующей схемой:

```sql
CREATE TABLE sales (
    Product_ID text,
    Sale_Date text,
    Sales_Rep text,
    Region text,
    Quantity_Sold text,
    Product_Category text,
    Unit_Cost text,
    Unit_Price text,
    Discount text
);
```

Вам необходимо выполнить следующие queries:

1. Создать view с именем `v_region_sales_summary`, содержащий следующие колонки (в том же порядке):

   * `Region`
   * `Sales_Count` — количество продаж в данном Region
   * `Total_Revenue` — общая сумма цен после применения скидки (Discount). Скидка задаётся в виде доли в диапазоне от 0 до 1. Итоговая стоимость товара равна Unit_Price × Quantity_Sold × (1 − Discount).

View должен включать **все Region**, присутствующие в таблице, и быть отсортированным по `Total_Revenue` от большего к меньшему.

Напишите SQL-код в файле `task2/solution.sql`.

---

## Task 3:

В этом задании вы будете использовать SQL команду `JOIN`.

Предположим, что вас попросили предоставить информацию об активности пользователей в рабочее время.
Вам предоставлены две базы данных: `users` и `server_logs`.

Таблица `users` содержит простую информацию о сотрудниках компании, такую как имя и `id`.

Таблица `server_logs` содержит информацию о логинах на сервер:

* `Log_ID` — primary key
* `User_ID` — ID пользователя, который вошёл в систему
* `Session_Start` — точное время начала сессии
* `Session_End` — время завершения сессии

Вам необходимо выполнить следующее:

1. Создать колонку в `server_logs` с именем `Session_Dur`, которая содержит длительность сессии (в минутах).
   Вы можете преобразовать дату в дни, используя SQL функцию `julianday()`.
2. Создать view с именем `v_users_activity`, содержащий следующие поля:

   * `User_ID`
   * `First_Name`
   * `Last_Name`
   * `Num_Sessions` — общее количество сессий, открытых пользователем
   * `Total_Session_Time` — общее время (в минутах), которое пользователь работал в сессиях

View должен быть отсортирован по `Total_Session_Time` по убыванию.

Вам необходимо реализовать `LEFT JOIN` между `users` и `server_logs`.

Решение для обоих пунктов должно быть написано в файле `task3/solution.sql`.

---
